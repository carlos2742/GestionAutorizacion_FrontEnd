<!-- Este es el modal de la conversación de una petición -->
<div class="modal-header mensajes">
    <h5 class="modal-title">Conversación</h5>
    <button type="button" class="close" aria-label="Close" ng-click=":: $modal.cancelar()">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body mensajes" modal-async>
    <div class="contenedor-mensajes" scroll-glue force-glue>
        <div ng-repeat="mensaje in $modal.mensajes track by mensaje.id" id="mensaje{{mensaje.id}}">
            <div class="separador-fecha" ng-if="$modal.mostrarSeparadorFecha($index)" ng-bind=":: mensaje.fechaEnvio.display"></div>
            <div class="row no-gutters">
                <div class="mensaje recibido" ng-class=":: {'col-9': !mensaje.enviadoPorUsuarioActivo}">
                    <div ng-if=":: !mensaje.enviadoPorUsuarioActivo">
                        <span class="enviado-por" ng-bind=":: mensaje.enviadoPor.display"></span>
                        <p ng-bind=":: mensaje.texto" class="mb-0"></p>
                        <span class="hora" ng-bind=":: mensaje.fechaEnvio.displayHora"></span>
                    </div>
                </div>
                <div class="mensaje enviado" ng-class=":: {'col-9': mensaje.enviadoPorUsuarioActivo, 'offset-3': mensaje.enviadoPorUsuarioActivo}">
                    <div ng-if=":: mensaje.enviadoPorUsuarioActivo">
                        <p ng-bind=":: mensaje.texto" class="mb-0"></p>
                        <span class="hora" ng-bind=":: mensaje.fechaEnvio.displayHora"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="contenedor-envio">
        <form id="edicionEtiquetaForm" name="edicionEtiquetaForm" ng-submit=":: $modal.enviar()" novalidate>
            <textarea class="form-control mb-2 mr-sm-2"
                      id="mensaje"
                      placeholder="Escriba su mensaje"
                      rows="1"
                      ng-model="$modal.mensaje"></textarea>

            <button class="btn btn-success btn-enviar" type="submit" ng-disabled="!$modal.mensaje" boton-async>
                <i class="icon-send"></i>
            </button>
        </form>
    </div>
</div>